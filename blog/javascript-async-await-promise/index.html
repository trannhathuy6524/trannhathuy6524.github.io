<!doctype html><html itemscope lang=vi itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta name=theme-name content="hugoplate"><link rel="shortcut icon" href=/images/favicon_hu_4384881fdc2d307e.png type=image/x-icon><link rel=icon href=/images/favicon_hu_4384881fdc2d307e.png type=image/x-icon><link rel=icon type=image/png sizes=48x48 href=/images/favicon_hu_79c3559174e61a5e.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon_hu_4384881fdc2d307e.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicon_hu_cfffba76e19e8ff2.png><link rel=manifest href=/manifest.webmanifest><meta name=msapplication-TileColor content="#ddd"><meta name=theme-color content="#ffffff"><base href=https://trannhathuy6524.github.io/blog/javascript-async-await-promise/><title>Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await</title><meta name=keywords content="Boilerplate,Hugo"><meta name=description content="Giải thích khái niệm bất đồng bộ trong JavaScript một cách dễ hiểu cho sinh viên. Học cách sử dụng Promise và async/await để xử lý tác vụ tốn thời gian như gọi API."><meta name=author content="zeon.studio"><meta property="og:image" content="https://trannhathuy6524.github.io/images/javascript-async-await-promise.png"><meta name=twitter:image content="https://trannhathuy6524.github.io/images/javascript-async-await-promise.png"><meta name=twitter:card content="summary_large_image"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="576"><meta property="og:image:type" content="image/.png"><meta property="og:title" content="Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await"><meta property="og:description" content="Giải thích khái niệm bất đồng bộ trong JavaScript một cách dễ hiểu cho sinh viên. Học cách sử dụng Promise và async/await để xử lý tác vụ tốn thời gian như gọi API."><meta property="og:type" content="website"><meta property="og:url" content="https://trannhathuy6524.github.io/blog/javascript-async-await-promise/"><meta name=twitter:title content="Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await"><meta name=twitter:description content="Giải thích khái niệm bất đồng bộ trong JavaScript một cách dễ hiểu cho sinh viên. Học cách sử dụng Promise và async/await để xử lý tác vụ tốn thời gian như gọi API."><meta name=twitter:site content="@zeon_studio"><meta name=twitter:creator content="@zeon.studio"><script>let indexURL="https://trannhathuy6524.github.io/searchindex.json",includeSectionsInSearch=["blog"],search_no_results="Không tìm thấy kết quả cho",search_initial_message="Nhập nội dung để tìm kiếm..."</script><meta http-equiv=x-dns-prefetch-control content="on"><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=//cdnjs.cloudflare.com><link rel=preconnect href=//www.googletagmanager.com><link rel=preconnect href=//www.google-analytics.com><link rel=dns-prefetch href=https://use.fontawesome.com><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//cdnjs.cloudflare.com><link rel=dns-prefetch href=//www.googletagmanager.com><link rel=dns-prefetch href=//www.google-analytics.com><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//connect.facebook.net><link rel=dns-prefetch href=//platform.linkedin.com><link rel=dns-prefetch href=//platform.twitter.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Signika:wght@500;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href=/css/style.afd9f0adc4efa0a82ff256abf3817abab30a4427daa60c47ede792f4db7c1a83.css integrity="sha256-r9nwrcTvoKgv8lar84F6urMKRCfapgxH7eeS9Nt8GoM=" rel=stylesheet><link rel=stylesheet href=/css/style-lazy.min.9e7e035d2f064fe004383f2ffc11a8f2966ef7b51c5fb2fac926e35c0061b5cf.css integrity="sha256-nn4DXS8GT+AEOD8v/BGo8pZu97UcX7L6ySbjXABhtc8=" media=print onload='this.media="all",this.onload=null'></head><body><header class="header sticky top-0 z-30"><nav class="navbar container"><div class=order-0><a class="navbar-brand block" href=/><span class="text-xl font-bold text-dark dark:text-white">Portfolio - Trần Nhật Huy</span></a></div><input id=nav-toggle type=checkbox class=hidden>
<label for=nav-toggle class="order-3 cursor-pointer flex items-center lg:hidden text-text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg>
<svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class=nav-item><a class=nav-link href=/>Trang chủ</a></li><li class=nav-item><a class=nav-link href=/about>Giới thiệu</a></li><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class="mt-4 inline-block lg:hidden"><a class="btn btn-outline-primary btn-sm" href=/contact>Liên hệ</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label=search class="border-border text-text-dark hover:text-primary
dark:border-darkmode-border mr-5 inline-block border-r pr-5
text-xl dark:text-white cursor-pointer dark:hover:text-darkmode-primary" data-target=search-modal>
<i class="fa-solid fa-search"></i></button><div class="theme-switcher mr-5 invisible"><input id=theme-switcher data-theme-switcher type=checkbox>
<label for=theme-switcher><span class=sr-only>theme switcher</span>
<span><svg class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"/></svg>
<svg class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"/></svg></span></label></div><script>var darkMode=localStorage.getItem("theme")==="dark";localStorage.getItem("theme")===null&&(darkMode=!1,window.matchMedia("(prefers-color-scheme: dark)").matches&&(darkMode=!0)),darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelectorAll("[data-theme-switcher]"),t=document.querySelector(".theme-switcher");[].forEach.call(e,function(e){e.checked=darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")})}),t.classList.remove("invisible")})</script><a href=/contact class="btn btn-outline-primary btn-sm hidden lg:inline-block">Liên hệ</a></div></nav></header><div class=search-modal aria-hidden=true style=--color-primary:#121212><div data-target=close-search-modal class=search-modal-overlay></div><div class=search-wrapper data-image=true data-description=true data-tags=true data-categories=true><div class=search-wrapper-header><label for=search-modal-input style=margin-top:-1px><span class=sr-only>search icon</span>
<svg viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search"><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"/></svg>
<svg viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset"><path fill="currentColor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"/></svg>
</label><input id=search-modal-input type=text data-search-input autocomplete=off aria-label=Search placeholder="Tìm bài viết..."></div><div class=search-wrapper-body><div class=search-result data-search-result></div><span class=search-result-empty>Nhập nội dung để tìm kiếm...</span></div><div class=search-wrapper-footer><span><kbd><svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"/></svg>
</kbd><kbd><svg width="14" height="14" fill="currentColor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"/></svg>
</kbd>để di chuyển
</span><span><kbd><svg width="12" height="12" fill="currentColor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"/></svg>
</kbd>để chọn
</span><span class=search-result-info></span>
<span data-target=close-search-modal><kbd>ESC</kbd> để đóng</span></div></div></div><main><section class="section pt-7"><div class=container><div class="row justify-center"><article class=lg:col-10><div class=mb-10><picture><source srcset=/images/javascript-async-await-promise_hu_14d8d5573e434828.webp media="(max-width: 575px)"><source srcset=/images/javascript-async-await-promise_hu_90e2c7417dea6928.webp media="(max-width: 767px)"><source srcset=/images/javascript-async-await-promise_hu_5c5a174010c8d69c.webp media="(max-width: 991px)"><source srcset=/images/javascript-async-await-promise_hu_b751c0c3f7d40ba2.webp><img loading=lazy decoding=async src=/images/javascript-async-await-promise_hu_5336fce8530ec6f.png class="w-full rounded img" alt="Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await" width=1024 height=576></picture></div><h1 class="h2 mb-4">Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await</h1><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/m%E1%BB%99t-l%E1%BA%ADp-tr%C3%ACnh-vi%C3%AAn-tr%E1%BA%BB/><i class="fa-regular fa-circle-user mr-2"></i>Một Lập Trình Viên Trẻ</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/javascript/>Java script
,
</a><a href=/categories/l%e1%ba%adp-tr%c3%acnh/>Lập trình</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
11 tháng 10, 2025</li></ul><div class="content mb-10"><details open class="table-of-content blog"><summary>Mục lục</summary><nav id=TableOfContents><ol><li><a href=#vấn-đề-đợi-đã-sao-lại-là-undefined>Vấn đề: “Đợi đã, sao lại là <code>undefined</code>?”</a></li><li><a href=#1-cái-thẻ-báo-rung---promise>1. &ldquo;Cái thẻ báo rung&rdquo; - Promise</a></li><li><a href=#2-asyncawait---cách-viết-code-thanh-lịch-hơn>2. async/await - Cách viết code &ldquo;thanh lịch&rdquo; hơn</a></li><li><a href=#bài-học-mình-rút-ra>Bài học mình rút ra</a></li><li><a href=#kết-luận>Kết luận</a></li></ol></nav></details><h2 id=vấn-đề-đợi-đã-sao-lại-là-undefined>Vấn đề: &ldquo;Đợi đã, sao lại là <code>undefined</code>?&rdquo;</h2><p>Chắc chắn bạn đã từng gặp trường hợp này: bạn dùng <code>fetch</code> để lấy dữ liệu từ một API, rồi <code>console.log</code> kết quả ngay dòng bên dưới, và BÙM&mldr; kết quả là <code>undefined</code> hoặc một thứ khó hiểu như <code>Promise {&lt;pending>}</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>layDuLieuUser</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;[https://api.github.com/users/google](https://api.github.com/users/google)&#39;</span>); <span style=color:#75715e>// Lấy dữ liệu user Google
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>data</span>); <span style=color:#75715e>// 😱 Kết quả không như mong đợi!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>layDuLieuUser</span>();
</span></span></code></pre></div><p>Đây không phải là lỗi. Đây là một trong những khái niệm quan trọng và mạnh mẽ nhất của JavaScript: Bất đồng bộ (Asynchronous).</p><p>Tưởng tượng đơn giản: Bạn vào một quán cà phê.</p><ul><li><p>Đồng bộ (Synchronous): Bạn order, rồi đứng yên tại quầy chờ, không làm gì cả cho đến khi nhân viên pha xong và đưa nước cho bạn. Rất lãng phí thời gian.</p></li><li><p>Bất đồng bộ (Asynchronous): Bạn order, nhân viên đưa bạn một cái thẻ báo rung. Bạn cầm thẻ về bàn ngồi lướt điện thoại, nói chuyện với bạn bè. Khi nào nước được pha xong, thẻ sẽ rung lên và bạn ra lấy. Đây chính là cách JavaScript hoạt động với các tác vụ tốn thời gian (như gọi API, đọc file).</p></li></ul><h2 id=1-cái-thẻ-báo-rung---promise>1. &ldquo;Cái thẻ báo rung&rdquo; - Promise</h2><p>Trong JavaScript, &ldquo;cái thẻ báo rung&rdquo; đó được gọi là Promise.</p><p>Một Promise là một đối tượng đại diện cho một tác vụ chưa hoàn thành, nhưng hứa hẹn sẽ trả về kết quả trong tương lai. Nó có 3 trạng thái:</p><ul><li><p>pending: Chờ. (Nhân viên đang pha cà phê).</p></li><li><p>fulfilled: Hoàn thành thành công. (Bạn đã nhận được ly cà phê).</p></li><li><p>rejected: Thất bại. (Quán hết cà phê).</p></li></ul><p>Vậy làm sao để xử lý khi &ldquo;thẻ báo rung&rdquo;? Chúng ta dùng .then() và .catch().</p><ul><li><p>.then(data => { &mldr; }): Hàm này sẽ được gọi khi Promise fulfilled (thành công). data chính là kết quả trả về.</p></li><li><p>.catch(error => { &mldr; }): Hàm này sẽ được gọi khi Promise rejected (thất bại).</p></li></ul><p>Hãy sửa lại ví dụ ban đầu bằng Promise:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;1. Bắt đầu order cà phê...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;[https://api.github.com/users/google](https://api.github.com/users/google)&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>response</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// fetch trả về một response, ta cần chuyển nó thành JSON
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>data</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Đây là lúc dữ liệu thực sự có thể dùng được!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;3. Cà phê đã tới! Dữ liệu user:&#34;</span>, <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>error</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Xử lý nếu có lỗi mạng hoặc API sập
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;3. Quán hết cà phê rồi! Lỗi:&#34;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;2. Trong lúc chờ, mình đi lướt điện thoại...&#34;</span>);
</span></span></code></pre></div><p>Nếu bạn chạy code trên, bạn sẽ thấy thứ tự in ra console là: 1, 2, rồi mới đến 3. Điều này chứng tỏ JavaScript không hề chờ fetch làm xong, nó chạy tiếp dòng code console.log số 2 ngay lập tức!</p><h2 id=2-asyncawait---cách-viết-code-thanh-lịch-hơn>2. async/await - Cách viết code &ldquo;thanh lịch&rdquo; hơn</h2><p>Dùng .then() nhiều lúc sẽ tạo ra các chuỗi lồng vào nhau rất khó đọc (còn gọi là &ldquo;callback hell&rdquo;). ES7 đã giới thiệu một cú pháp &ldquo;ngọt ngào&rdquo; hơn để làm việc với Promise, đó là async/await.</p><p>Nó giúp bạn viết code bất đồng bộ mà trông y hệt như code đồng bộ.</p><ul><li><p>async: Đặt từ khóa này trước một hàm để báo hiệu rằng hàm đó có chứa các tác vụ bất đồng bộ. Hàm async luôn luôn trả về một Promise.</p></li><li><p>await: Chỉ có thể được dùng bên trong một hàm async. Nó ra lệnh cho JavaScript: &ldquo;Dừng lại ở đây, đợi cho cái Promise này giải quyết xong rồi hãy đi tiếp.&rdquo;</p></li></ul><p>Hãy xem lại ví dụ trên được viết bằng async/await:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;1. Bắt đầu order cà phê...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bọc code trong một hàm async
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>layDuLieuUser</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 1. Đợi fetch hoàn thành
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;[https://api.github.com/users/google](https://api.github.com/users/google)&#39;</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 2. Đợi việc chuyển đổi sang JSON hoàn thành
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;3. Cà phê đã tới! Dữ liệu user:&#34;</span>, <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;3. Quán hết cà phê rồi! Lỗi:&#34;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Gọi hàm async
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>layDuLieuUser</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;2. Trong lúc chờ, mình đi lướt điện thoại...&#34;</span>);
</span></span></code></pre></div><p>Code trông tuần tự, sạch sẽ và dễ đọc hơn rất nhiều đúng không? try&mldr;catch được dùng để bắt lỗi, thay thế cho .catch() của Promise.</p><h2 id=bài-học-mình-rút-ra>Bài học mình rút ra</h2><ul><li><p>JavaScript không chờ đợi ai cả: Nó được thiết kế để không bị &ldquo;treo&rdquo; khi xử lý các tác vụ chậm. Đây là một thế mạnh, không phải là lỗi.</p></li><li><p>Hiểu Promise là nền tảng: async/await chỉ là một cách viết khác cho Promise. Hãy chắc chắn rằng bạn hiểu cách .then() và .catch() hoạt động.</p></li><li><p>Luôn xử lý lỗi: Các tác vụ mạng luôn có thể thất bại. Luôn dùng .catch() hoặc try&mldr;catch để chương trình của bạn không bị &ldquo;sập&rdquo; một cách bất ngờ. Đây là thói quen của một lập trình viên chuyên nghiệp.</p></li></ul><h2 id=kết-luận>Kết luận</h2><p>Hiểu về bất đồng bộ là một bước ngoặt lớn đối với bất kỳ ai học JavaScript. Nó mở ra cánh cửa để làm việc với API, tương tác với server và xây dựng các ứng dụng web phức tạp.</p><p>Lần tới khi bạn dùng fetch để lấy dữ liệu, đừng console.log ngay bên dưới. Hãy bọc nó trong một hàm async và dùng await để chờ &ldquo;lời hứa&rdquo; được thực hiện. Bạn sẽ thấy code của mình hoạt động đúng như mong đợi và dễ quản lý hơn rất nhiều.</p></div><div class="row items-start justify-between"><div class="lg:col-6 mb-10 flex items-center lg:mb-0"><h5 class=mr-3>Thẻ :</h5><ul><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/javascript/>Javascript</a></li><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/async/>Async</a></li><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/promise/>Promise</a></li><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/api/>API</a></li><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/es6/>Es6</a></li><li class=inline-block><a class="bg-light hover:bg-primary dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/sinh-vien-it/>Sinh vien it</a></li></ul></div><div class="lg:col-6 flex items-center lg:justify-end"><h5>Chia sẻ :</h5><div class=share-icons><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ftrannhathuy6524.github.io%2fblog%2fjavascript-async-await-promise%2f" target=_blank rel=noopener aria-label="share facebook"><span class=share-icon><svg viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg>
</span></a><a class="share-link share-x" href="https://x.com/intent/tweet/?text=T%e1%ba%a1i%20sao%20code%20JS%20c%e1%bb%a7a%20t%c3%b4i%20ch%e1%ba%a1y%20kh%c3%b4ng%20%c4%91%c3%bang%20th%e1%bb%a9%20t%e1%bb%b1%3f%20Hi%e1%bb%83u%20v%e1%bb%81%20B%e1%ba%a5t%20%c4%91%e1%bb%93ng%20b%e1%bb%99%2c%20Promise%20v%c3%a0%20async%2fawait&amp;url=https%3a%2f%2ftrannhathuy6524.github.io%2fblog%2fjavascript-async-await-promise%2f" target=_blank rel=noopener aria-label="share x"><span aria-hidden=true class=share-icon><svg viewBox="0 0 24 24"><path d="M8 2H1l8.26 11.015L1.45 22H4.1l6.388-7.349L16 22h7l-8.608-11.478L21.8 2h-2.65l-5.986 6.886zm9 18L5 4h2l12 16z"/></svg>
</span></a><a class="share-link share-email" href="mailto:?subject=T%e1%ba%a1i%20sao%20code%20JS%20c%e1%bb%a7a%20t%c3%b4i%20ch%e1%ba%a1y%20kh%c3%b4ng%20%c4%91%c3%bang%20th%e1%bb%a9%20t%e1%bb%b1%3f%20Hi%e1%bb%83u%20v%e1%bb%81%20B%e1%ba%a5t%20%c4%91%e1%bb%93ng%20b%e1%bb%99%2c%20Promise%20v%c3%a0%20async%2fawait&amp;body=https%3a%2f%2ftrannhathuy6524.github.io%2fblog%2fjavascript-async-await-promise%2f" target=_self rel=noopener aria-label="share email"><span aria-hidden=true class=share-icon><svg viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg>
</span></a><span class=fediverse-share><a class="share-link share-fediverse" href=javascript:void(0); onclick=toggleFediverseInput(this) aria-label="share fediverse"><span aria-hidden=true class=share-icon><svg viewBox="-10 -5 1034 1034" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"><path d="M539 176q-32 0-55 22t-25 55 20.5 58 56 27 58.5-20.5 27-56-20.5-59T544 176h-5zm-87 95-232 118q20 20 25 48l231-118q-19-20-24-48zm167 27q-13 25-38 38l183 184q13-25 39-38zM477 320 342 585l40 40 143-280q-28-5-48-25zm104 16q-22 11-46 10l-8-1 21 132 56 9zM155 370q-32 0-55 22.5t-25 55 20.5 58 56.5 27 59-21 26.5-56-21-58.5-55.5-27h-6zm90 68q1 9 1 18-1 19-10 35l132 21 26-50zm225 36-26 51 311 49q-1-8-1-17 1-19 10-36zm372 6q-32 1-55 23t-24.5 55 21 58 56 27 58.5-20.5 27-56.5-20.5-59-56.5-27h-6zM236 493q-13 25-39 38l210 210 51-25zm-40 38q-21 11-44 10l-9-1 40 256q21-10 45-9l8 1zm364 22 48 311q21-10 44-9l10 1-46-294zm195 23-118 60 8 56 135-68q-20-20-25-48zm26 49-119 231q28 5 48 25l119-231q-28-5-48-25zM306 654l-68 134q28 5 48 25l60-119zm262 17-281 143q19 20 24 48l265-135zM513 771l-51 25 106 107q13-25 39-38zM222 795q-32 0-55.5 22.5t-25 55 21 57.5 56 27 58.5-20.5 27-56-20.5-58.5-56.5-27h-5zm89 68q2 9 1 18-1 19-9 35l256 41q-1-9-1-18 1-18 10-35zm335 0q-32 0-55 22.5t-24.5 55 20.5 58 56 27 59-21 27-56-20.5-58.5-56.5-27h-6z"/></g></svg>
</span></a><span class=fediverse-input-wrapper style=display:none><input type=text placeholder="Enter Fediverse Instance URL" class=fediverse-input onkeypress='handleFediverseShare(event,"https://trannhathuy6524.github.io/blog/javascript-async-await-promise/","Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await")'>
<button class=fediverse-check-button onclick='handleFediverseShareButton(this,"https://trannhathuy6524.github.io/blog/javascript-async-await-promise/","Tại sao code JS của tôi chạy không đúng thứ tự? Hiểu về Bất đồng bộ, Promise và async/await")'>
Share
</button>
</span></span><button class="share-link share-copy" onclick='copyToClipboard(this,"https://trannhathuy6524.github.io/blog/javascript-async-await-promise/")'>
<span class=share-icon><svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1.0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1.0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-1c.55.0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 17H5V5h14v14z"/></svg></span></button></div><script>function toggleFediverseInput(e){const n=e.closest(".fediverse-share"),t=n.querySelector(".fediverse-input-wrapper");t.style.display=t.style.display==="none"?"block":"none"}function handleFediverseShare(e,t,n){if(e.key==="Enter"){const o=e.target;let s=o.value.trim();if(s){s.startsWith("https://")||(s=`https://${s}`);const e=`${s}/share?text=${encodeURIComponent(n)}&url=${encodeURIComponent(t)}`;window.open(e,"_blank","noopener")}}}function handleFediverseShareButton(e,t,n){const o=e.previousElementSibling;let s=o.value.trim();if(s){s.startsWith("https://")||(s=`https://${s}`);const e=`${s}/share?text=${encodeURIComponent(n)}&url=${encodeURIComponent(t)}`;window.open(e,"_blank","noopener")}}function copyToClipboard(e,t){navigator.clipboard.writeText(t).then(()=>{const t=e.querySelector("svg path"),n="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-1c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 17H5V5h14v14z",s="M9 16.2l-3.5-3.5-1.4 1.4L9 19 20 8l-1.4-1.4L9 16.2z";t.setAttribute("d",s),setTimeout(()=>{t.setAttribute("d",n)},1e3)})}</script></div></div><div class=mt-20><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//themefisher-template.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div><div class="section pb-0"><h2 class="h3 mb-12">Bài viết liên quan</h2><div class=row><div class="lg:col-4 md:col-6 mb-14"><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/js-array-methods_hu_18e6e44fbb316d27.webp media="(max-width: 575px)"><source srcset=/images/js-array-methods_hu_149f554bd70d91e5.webp media="(max-width: 767px)"><source srcset=/images/js-array-methods_hu_d0ee5600363ed767.webp media="(max-width: 991px)"><source srcset=/images/js-array-methods_hu_aab096c7046bd816.webp><img loading=lazy decoding=async src=/images/js-array-methods_hu_1c91ba6775876e78.png class="mb-6 w-full rounded img" alt="Làm chủ Array Methods: map, filter, reduce trong 5 phút" width=1024 height=576></picture><h4 class=mb-3><a href=/blog/lam-chu-array-methods/>Làm chủ Array Methods: map, filter, reduce trong 5 phút</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/m%E1%BB%99t-l%E1%BA%ADp-tr%C3%ACnh-vi%C3%AAn-tr%E1%BA%BB/><i class="fa-regular fa-circle-user mr-2"></i>Một Lập Trình Viên Trẻ</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-1"></i>
<a href=/categories/javascript/ class=ms-1>Java script
,
</a><a href=/categories/l%e1%ba%adp-tr%c3%acnh/ class=ms-1>Lập trình</a></li></ul><p class=mb-6>Giới thiệu Khi mới học JavaScript, mình cũng như nhiều bạn khác, hễ cứ đụng đến mảng (array) là lại dùng vòng lặp for. Muốn nhân đôi các số trong mảng? Dùng . Muốn lọc ra các số chẵn? Lại dùng for. Code thì chạy được, nhưng trông rất dài và đôi khi khó đọc.</p><a class="btn btn-outline-primary btn-sm" href=/blog/lam-chu-array-methods/>Đọc thêm</a></div></div><div class="lg:col-4 md:col-6 mb-14"><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/solid-principles-java_hu_2e6056b22201d6a8.webp media="(max-width: 575px)"><source srcset=/images/solid-principles-java_hu_11dbb0942687b10f.webp media="(max-width: 767px)"><source srcset=/images/solid-principles-java_hu_9891ea9b5a96c897.webp media="(max-width: 991px)"><source srcset=/images/solid-principles-java_hu_7508172484228440.webp><img loading=lazy decoding=async src=/images/solid-principles-java_hu_2052a930f3219a79.png class="mb-6 w-full rounded img" alt="SOLID cho sinh viên: 5 nguyên tắc vàng để code Java 'sạch' hơn" width=1024 height=576></picture><h4 class=mb-3><a href=/blog/solid/>SOLID cho sinh viên: 5 nguyên tắc vàng để code Java 'sạch' hơn</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/m%E1%BB%99t-l%E1%BA%ADp-tr%C3%ACnh-vi%C3%AAn-tr%E1%BA%BB/><i class="fa-regular fa-circle-user mr-2"></i>Một Lập Trình Viên Trẻ</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-1"></i>
<a href=/categories/java/ class=ms-1>Java
,
</a><a href=/categories/l%e1%ba%adp-tr%c3%acnh/ class=ms-1>Lập trình</a></li></ul><p class=mb-6>Code chạy được, nhưng đã &ldquo;tốt&rdquo; chưa? Chào mọi người, hồi năm hai, mình từng rất tự hào khi code xong một chương trình quản lý sinh viên bằng Java. Nó chạy được, thêm, xóa, sửa ngon lành. Nhưng khi thầy giáo yêu cầu thêm một chức năng mới, ví dụ như &ldquo;xuất danh sách ra file PDF&rdquo; thay vì chỉ là file text, mình đã phải sửa lại rất nhiều file, và lỡ tay làm hỏng vài chức năng cũ. 😫</p><a class="btn btn-outline-primary btn-sm" href=/blog/solid/>Đọc thêm</a></div></div><div class="lg:col-4 md:col-6 mb-14"><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/git-github-for-beginners_hu_2d26da6b9b8ec7f8.webp media="(max-width: 575px)"><source srcset=/images/git-github-for-beginners_hu_159d62b82d0cfd1d.webp media="(max-width: 767px)"><source srcset=/images/git-github-for-beginners_hu_a947fa2cbb67c48a.webp media="(max-width: 991px)"><source srcset=/images/git-github-for-beginners_hu_86edd483470c236e.webp><img loading=lazy decoding=async src=/images/git-github-for-beginners_hu_b2a4b87b692633fa.png class="mb-6 w-full rounded img" alt="Git cho người mới: Đừng code 'chay' nữa, hãy dùng 'cỗ máy thời gian' này!" width=1024 height=576></picture><h4 class=mb-3><a href=/blog/git-github-for-beginners/>Git cho người mới: Đừng code 'chay' nữa, hãy dùng 'cỗ máy thời gian' này!</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/m%E1%BB%99t-l%E1%BA%ADp-tr%C3%ACnh-vi%C3%AAn-tr%E1%BA%BB/><i class="fa-regular fa-circle-user mr-2"></i>Một Lập Trình Viên Trẻ</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-1"></i>
<a href=/categories/c%c3%b4ng-c%e1%bb%a5/ class=ms-1>Công cụ
,
</a><a href=/categories/l%e1%ba%adp-tr%c3%acnh/ class=ms-1>Lập trình</a></li></ul><p class=mb-6>File của bạn có bao giờ trông như thế này không? Mình cá là có:</p><a class="btn btn-outline-primary btn-sm" href=/blog/git-github-for-beginners/>Đọc thêm</a></div></div></div></div></div></section></main><footer class="bg-light dark:bg-darkmode-light"><div class=container><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href=/><img fetchpriority=high decoding=async class="img img-light" width=160 height=32 src=/images/logo_hu_75df6f187f7b785d.webp alt=Hugoplate onerror='this.onerror=null,this.src="/images/logo_hu_613f51f483beed3c.png"'>
<img fetchpriority=high decoding=async class="img img-dark" width=160 height=32 src=/images/logo-darkmode_hu_a274d2b570d85754.webp alt=Hugoplate onerror='this.onerror=null,this.src="/images/logo-darkmode_hu_11d6a0e948ad5f4.png"'></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul><li class="m-3 inline-block"><a href=/about>Giới thiệu</a></li><li class="m-3 inline-block"><a href=/elements>Thành phần</a></li><li class="m-3 inline-block"><a href=/privacy-policy>Chính sách bảo mật</a></li></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class=social-icons><li><a target=_blank aria-label=facebook rel="nofollow noopener" href=https://www.facebook.com/trannhathuy65><i class="fab fa-facebook"></i></a></li><li><a target=_blank aria-label=twitter rel="nofollow noopener" href=https://twitter.com/><i class="fab fa-twitter"></i></a></li><li><a target=_blank aria-label=github rel="nofollow noopener" href=https://github.com/trannhathuy6524><i class="fab fa-github"></i></a></li><li><a target=_blank aria-label=linkedin rel="nofollow noopener" href=https://www.linkedin.com/><i class="fab fa-linkedin"></i></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-text-light dark:text-darkmode-text-light container text-center"><p>Designed & Developed by <a href=https://zeon.studio target=_blank>Zeon Studio</a></p></div></div></footer><script crossorigin=anonymous integrity="sha256-NoqgJlugD+mB4Hf8AueiiPBQSb7ASin+oZS0fYEdtiA=" src=/js/script.min.368aa0265ba00fe981e077fc02e7a288f05049bec04a29fea194b47d811db620.js></script><script defer async crossorigin=anonymous integrity="sha256-8w9V5+VCnGhgTHXOsnVQjFqhE3cwvfCJD4096vUhMp0=" src=/js/script-lazy.min.f30f55e7e5429c68604c75ceb275508c5aa1137730bdf0890f8d3deaf521329d.js></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></body></html>